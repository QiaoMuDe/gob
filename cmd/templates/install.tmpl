# gob 构建工具配置文件 - 安装环境
# 项目地址: https://gitee.com/MM-Q/gob.git

[build]

# ==================== 构建配置 ====================
# 构建工作目录, 默认为当前目录
work_dir = '.'

# ==================== 输出配置 ====================
[build.output]
# 输出目录
dir = 'output'
# 输出文件名
name = '<|.ProjectName|>'
# 使用简单名称（不包含平台和架构信息）
simple = true
# 将输出文件打包为zip
zip = false

# ==================== 源码配置 ====================
[build.source]
# 入口文件
main_file = '<|.MainFile|>'
# 在编译时使用vendor目录
use_vendor = true

# ==================== Git 配置 ====================
[build.git]
# 在编译时注入git信息
inject = true
# 指定包含Git信息的链接器标志, 支持占位符: {{AppName}} (应用名称)、{{GitVersion}} (Git版本)、{{GitCommit}} (提交哈希)、{{GitCommitTime}} (提交时间)、{{BuildTime}} (构建时间)、{{GitTreeState}} (树状态)
ldflags = "-X 'gitee.com/MM-Q/verman.appName={{AppName}}' -X 'gitee.com/MM-Q/verman.gitVersion={{GitVersion}}' -X 'gitee.com/MM-Q/verman.gitCommit={{GitCommit}}' -X 'gitee.com/MM-Q/verman.gitCommitTime={{GitCommitTime}}' -X 'gitee.com/MM-Q/verman.buildTime={{BuildTime}}' -X 'gitee.com/MM-Q/verman.gitTreeState={{GitTreeState}}' -s -w"

# ==================== 编译器配置 ====================
[build.compiler]
# 启用CGO
enable_cgo = false
# 设置Go代理
proxy = 'https://goproxy.cn,https://goproxy.io,direct'
# 跳过构建前检查
skip_check = false
# 构建超时时间(支持单位: ns/us/ms/s/m/h)
timeout = '60s'
# 指定链接器标志
ldflags = '-s -w'

# ==================== 目标平台配置 ====================
[build.target]
# 批量编译模式
batch = false
# 仅编译当前平台
current_platform_only = true
# 支持的目标平台列表, 多个平台用逗号分隔
platforms = ['linux', 'windows']
# 支持的目标架构列表, 多个架构用逗号分隔
architectures = ['amd64']

# ==================== 命令配置 ====================
[build.command]
# 编译命令模板, 支持占位符: {{ldflags}} (链接器标志)、{{output}} (输出路径)、{{if UseVendor}}-mod=vendor{{end}} (条件包含vendor)、{{mainFile}} (入口文件), 多个命令用逗号分隔
build = ['go', 'build', '-trimpath', '-ldflags', '{{ldflags}}', '-o', '{{output}}', '{{if UseVendor}}-mod=vendor{{end}}', '{{mainFile}}']

# ==================== UI 配置 ====================
[build.ui]
# 启用颜色输出
color = true

# ==================== 安装配置 ====================
[install]
# 安装编译后的二进制文件
install = true
# 指定安装路径
install_path = '$GOPATH/bin'
# 强制安装（覆盖已存在文件）
force = true

# ==================== 环境变量配置 ====================
[env]
# 示例:
# GOOS = "linux"
# GOARCH = "amd64"
# CGO_ENABLED = "1"

# ==================== 构建前执行配置 ====================
[build.pre_build]
# 是否启用构建前命令
enabled = false
# 构建前执行的命令列表
commands = []
# 命令执行失败时是否退出程序, true=退出, false=继续执行但打印错误
exit_on_error = true

# ==================== 构建后执行配置 ====================
[build.post_build]
# 是否启用构建后命令
enabled = false
# 构建后执行的命令列表
commands = []
# 命令执行失败时是否退出程序, true=退出, false=继续执行但打印错误
exit_on_error = true


